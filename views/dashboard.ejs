<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel - MinecraftTR</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="/" class="navbar-brand">
                <i class="fas fa-cube"></i>
                MinecraftTR
            </a>
            
            <ul class="navbar-nav">
                <li><a href="/" class="nav-link"><i class="fas fa-home"></i> Ana Sayfa</a></li>
                <li><a href="/market" class="nav-link"><i class="fas fa-shopping-bag"></i> Market</a></li>
                <li><a href="/toplist" class="nav-link"><i class="fas fa-trophy"></i> Sıralama</a></li>
                <li><a href="/news" class="nav-link"><i class="fas fa-newspaper"></i> Haberler</a></li>
                <li class="dropdown">
                    <a href="/games" class="nav-link"><i class="fas fa-gamepad"></i> Oyunlar</a>
                    <div class="dropdown-menu">
                        <a href="/games/survival" class="dropdown-item"><i class="fas fa-tree"></i> Survival</a>
                        <a href="/games/bedwars" class="dropdown-item"><i class="fas fa-bed"></i> BedWars</a>
                        <a href="/games/skywars" class="dropdown-item"><i class="fas fa-cloud"></i> SkyWars</a>
                        <a href="/games/prison" class="dropdown-item"><i class="fas fa-lock"></i> Prison</a>
                        <a href="/games/skyblock" class="dropdown-item"><i class="fas fa-mountain"></i> SkyBlock</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="/dashboard" class="nav-link active"><i class="fas fa-user"></i> <%= user.username %></a>
                    <div class="dropdown-menu">
                        <a href="/dashboard" class="dropdown-item"><i class="fas fa-tachometer-alt"></i> Panel</a>
                        <a href="/profile" class="dropdown-item"><i class="fas fa-user-circle"></i> Profil</a>
                        <a href="/logout" class="dropdown-item"><i class="fas fa-sign-out-alt"></i> Çıkış</a>
                    </div>
                </li>
            </ul>
            
            <button class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Page Header -->
    <div class="page-header">
        <div class="container">
            <h1 class="page-title">
                <i class="fas fa-tachometer-alt"></i>
                Kullanıcı Paneli
            </h1>
            <p class="page-subtitle">Hoş geldin <%= user.username %>! Hesap yönetim panelin</p>
        </div>
    </div>

<div style="padding: 60px 20px; background: #111827; min-height: calc(100vh - 300px);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <div>
                <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">
                    Hoş geldin, <span class="text-green-400"><%= user.username %></span>!
                </h1>
                <p class="text-gray-300">Hesap yönetim panelinde tüm bilgilerine ulaşabilirsin.</p>
            </div>
            <div class="mt-4 md:mt-0">
                <a href="/profile/<%= user.username %>" class="btn-secondary">
                    <i class="fas fa-user mr-2"></i>Profilimi Görüntüle
                </a>
            </div>
        </div>

        <!-- Profile Summary -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <!-- User Info Card -->
            <div class="lg:col-span-1">
                <div class="bg-gray-800 border border-gray-700 rounded-lg p-6">
                    <div class="text-center">
                        <div class="w-24 h-24 mx-auto mb-4 rounded-full overflow-hidden border-4 border-green-500">
                            <img src="<%= profile.avatar || '/images/default-avatar.png' %>" 
                                 alt="<%= user.username %>" 
                                 class="w-full h-full object-cover"
                                 onerror="this.src='/images/default-avatar.png'">
                        </div>
                        <h3 class="text-xl font-bold text-white mb-1"><%= user.username %></h3>
                        <div class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-<%= profile.rank_name === 'VIP' ? 'yellow' : profile.rank_name === 'Premium' ? 'purple' : 'gray' %>-500 text-white mb-4">
                            <i class="fas fa-crown mr-1"></i>
                            <%= profile.rank_name || 'Oyuncu' %>
                        </div>
                        <div class="space-y-2 text-sm text-gray-300">
                            <div class="flex justify-between">
                                <span>Kayıt Tarihi:</span>
                                <span><%= new Date(profile.join_date).toLocaleDateString('tr-TR') %></span>
                            </div>
                            <div class="flex justify-between">
                                <span>Son Giriş:</span>
                                <span><%= new Date(profile.last_online).toLocaleDateString('tr-TR') %></span>
                            </div>
                            <div class="flex justify-between">
                                <span>Toplam Oyun Süresi:</span>
                                <span><%= Math.floor((profile.total_playtime || 0) / 60) %> saat</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Balance & Stats -->
            <div class="lg:col-span-2">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Balance Card -->
                    <div class="bg-gray-800 border border-gray-700 rounded-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">Hesap Bakiyesi</h3>
                            <i class="fas fa-wallet text-green-400 text-xl"></i>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-coins text-yellow-400 mr-2"></i>
                                    <span class="text-white">Coin</span>
                                </div>
                                <span class="text-xl font-bold text-yellow-400"><%= profile.coins || 0 %></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-gem text-purple-400 mr-2"></i>
                                    <span class="text-white">Token</span>
                                </div>
                                <span class="text-xl font-bold text-purple-400"><%= profile.tokens || 0 %></span>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-700">
                            <a href="/market" class="btn-primary w-full">
                                <i class="fas fa-shopping-bag mr-2"></i>Market'e Git
                            </a>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="bg-gray-800 border border-gray-700 rounded-lg p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">İstatistikler</h3>
                            <i class="fas fa-chart-bar text-blue-400 text-xl"></i>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-gray-300">Satın Alımlar</span>
                                <span class="text-white font-semibold"><%= recentPurchases.length %></span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-300">Durum</span>
                                <span class="<%= profile.is_online ? 'text-green-400' : 'text-red-400' %> font-semibold">
                                    <%= profile.is_online ? 'Çevrimiçi' : 'Çevrimdışı' %>
                                </span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-300">Seviye</span>
                                <span class="text-white font-semibold">
                                    <%= Math.floor((profile.total_playtime || 0) / 3600) + 1 %>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Recent Purchases -->
            <div class="bg-gray-800 border border-gray-700 rounded-lg p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-semibold text-white">Son Satın Alımlar</h3>
                    <a href="/purchases" class="text-green-400 hover:text-green-300 text-sm">
                        Tümünü Gör <i class="fas fa-arrow-right ml-1"></i>
                    </a>
                </div>
                
                <% if (recentPurchases && recentPurchases.length > 0) { %>
                    <div class="space-y-4">
                        <% recentPurchases.forEach(function(purchase) { %>
                            <div class="flex items-center justify-between p-4 bg-gray-700 rounded-lg">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-gray-600 rounded-lg mr-3 flex items-center justify-center">
                                        <img src="<%= purchase.item_image || '/images/default-item.png' %>" 
                                             alt="<%= purchase.item_name %>" 
                                             class="w-8 h-8 object-cover rounded"
                                             onerror="this.src='/images/default-item.png'">
                                    </div>
                                    <div>
                                        <h4 class="text-white font-medium"><%= purchase.item_name %></h4>
                                        <p class="text-gray-400 text-sm">
                                            <%= new Date(purchase.purchase_date).toLocaleDateString('tr-TR') %>
                                        </p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="<%= purchase.currency === 'coins' ? 'text-yellow-400' : 'text-purple-400' %> font-semibold">
                                        <i class="fas fa-<%= purchase.currency === 'coins' ? 'coins' : 'gem' %> mr-1"></i>
                                        <%= purchase.price %>
                                    </div>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                <% } else { %>
                    <div class="text-center py-8">
                        <i class="fas fa-shopping-cart text-gray-600 text-4xl mb-3"></i>
                        <p class="text-gray-400">Henüz satın alım yapmadın.</p>
                        <a href="/market" class="btn-primary mt-4">
                            Market'i Keşfet
                        </a>
                    </div>
                <% } %>
            </div>

            <!-- Quick Actions -->
            <div class="bg-gray-800 border border-gray-700 rounded-lg p-6">
                <h3 class="text-xl font-semibold text-white mb-6">Hızlı İşlemler</h3>
                
                <div class="space-y-4">
                    <a href="/market" class="w-full bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg flex items-center transition-colors">
                        <div class="bg-green-500 p-2 rounded-lg mr-4">
                            <i class="fas fa-shopping-bag text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-semibold">Market</h4>
                            <p class="text-green-100 text-sm">Rütbe ve eşya satın al</p>
                        </div>
                        <i class="fas fa-chevron-right ml-auto"></i>
                    </a>

                    <a href="/profile/<%= user.username %>" class="w-full bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-lg flex items-center transition-colors">
                        <div class="bg-blue-500 p-2 rounded-lg mr-4">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-semibold">Profilim</h4>
                            <p class="text-blue-100 text-sm">İstatistiklerini görüntüle</p>
                        </div>
                        <i class="fas fa-chevron-right ml-auto"></i>
                    </a>

                    <a href="/support" class="w-full bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-lg flex items-center transition-colors">
                        <div class="bg-purple-500 p-2 rounded-lg mr-4">
                            <i class="fas fa-headset text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-semibold">Destek</h4>
                            <p class="text-purple-100 text-sm">Yardım al ve ticket aç</p>
                        </div>
                        <i class="fas fa-chevron-right ml-auto"></i>
                    </a>

                    <button onclick="copyIP()" class="w-full bg-gray-600 hover:bg-gray-700 text-white p-4 rounded-lg flex items-center transition-colors">
                        <div class="bg-gray-500 p-2 rounded-lg mr-4">
                            <i class="fas fa-server text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-semibold">Sunucu IP'si</h4>
                            <p class="text-gray-100 text-sm">play.minecrafttr.com</p>
                        </div>
                        <i class="fas fa-copy ml-auto"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Achievement Section (Future Feature) -->
        <div class="mt-8 bg-gray-800 border border-gray-700 rounded-lg p-6">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold text-white">Başarımlar</h3>
                <span class="text-sm text-gray-400">Yakında gelecek</span>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="achievement-card locked">
                    <i class="fas fa-trophy text-gray-500 text-2xl mb-2"></i>
                    <h4 class="text-gray-400 font-medium text-sm">İlk Giriş</h4>
                </div>
                <div class="achievement-card locked">
                    <i class="fas fa-medal text-gray-500 text-2xl mb-2"></i>
                    <h4 class="text-gray-400 font-medium text-sm">İlk Satın Alım</h4>
                </div>
                <div class="achievement-card locked">
                    <i class="fas fa-star text-gray-500 text-2xl mb-2"></i>
                    <h4 class="text-gray-400 font-medium text-sm">Hafta Oyuncusu</h4>
                </div>
                <div class="achievement-card locked">
                    <i class="fas fa-crown text-gray-500 text-2xl mb-2"></i>
                    <h4 class="text-gray-400 font-medium text-sm">VIP Üye</h4>
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-cube"></i> MinecraftTR</h3>
                    <p>Türkiye'nin en eğlenceli Minecraft sunucusu.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-discord"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4>Bağlantılar</h4>
                    <ul>
                        <li><a href="/">Ana Sayfa</a></li>
                        <li><a href="/market">Market</a></li>
                        <li><a href="/toplist">Sıralama</a></li>
                        <li><a href="/news">Haberler</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>İletişim</h4>
                    <p><i class="fas fa-envelope"></i> info@minecrafttr.com</p>
                    <p><i class="fas fa-server"></i> play.minecrafttr.com</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 MinecraftTR. Tüm hakları saklıdır.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/js/main.js"></script>
</body>
</html>